(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64e5b3e9","chunk-2789b5d0","chunk-0c539388"],{"0feb":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"f",(function(){return n})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return i})),r.d(t,"g",(function(){return d}));var a=r("b775"),s=r("365c");function o(e){return Object(a["b"])({url:s["b"].Permission+"/getPermList",data:e,method:"get"})}function n(e){return Object(a["b"])({url:s["b"].Permission+"/savePerm",data:e,method:"post"})}function u(e){return Object(a["b"])({url:s["b"].Permission+"/delPerm",data:e,method:"post"})}function c(e){return Object(a["b"])({url:s["b"].Permission+"/getPermSettingList",data:e,method:"get"})}function l(e){return Object(a["b"])({url:s["b"].Permission+"/getRoleList",data:e,method:"get"})}function i(e){return Object(a["b"])({url:s["b"].Permission+"/getUserList",data:e,method:"get"})}function d(e){return Object(a["b"])({url:s["b"].Permission+"/savePermSetting",data:e,method:"post"})}},"1bea":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",[r("div",{staticClass:"table-operator"},[r("a-button",{attrs:{type:"primary",icon:"save"},on:{click:e.handleSave}},[e._v("保存权限")])],1),r("a-row",{attrs:{gutter:24}},[e.showUser?r("a-col",{attrs:{span:5}},[r("users",{ref:"users",on:{doSearchUserPerm:e.doSearchUserPerm}})],1):e._e(),r("a-col",{attrs:{span:5}},[r("roles",{ref:"roles",attrs:{showOp:!e.showUser,roleQueryParam:e.roleQueryParam},on:{doSearchRolePerm:e.doSearchRolePerm}})],1),r("a-col",{attrs:{span:e.showUser?14:18}},[r("s-table",{ref:"permTable",attrs:{columns:e.permColumns,"load-data":e.loadPermData,showRowNum:e.showUser,multiSelect:!e.showUser,"first-load":!e.showUser,"query-param":e.permQueryParam,afterSearch:e.afterSearch}})],1)],1)],1)},s=[],o=(r("4160"),r("159b"),r("2af9")),n=r("8cbc"),u=r("9c8b"),c=r("0feb"),l={name:"PermSelect",components:{STable:o["g"],Roles:n["default"],Users:u["default"]},props:{showUser:{type:Boolean,default:!0}},data:function(){return{permQueryParam:{roleId:"",userId:""},roleQueryParam:{userId:""},permColumns:[{title:"名称",dataIndex:"name",searchable:!0,scopedSlots:{customRender:"name"}},{title:"编码",dataIndex:"permission",searchable:!0,scopedSlots:{customRender:"permission"}},{title:"描述",dataIndex:"description",scopedSlots:{customRender:"description"}}]}},methods:{loadPermData:function(e){return Object(c["c"])(e).then((function(e){return e.result}))},doSearchUserPerm:function(e){this.roleQueryParam.userId=e,this.$refs.roles.$refs.roleTable.doSearch(),this.permQueryParam.userId=e,this.$refs.permTable.doSearch()},doSearchRolePerm:function(e){this.permQueryParam.roleId=e,this.$refs.permTable.doSearch()},afterSearch:function(e,t){e.selectedRowKeys=[],e.selectedRows=[],t.forEach((function(t){t.enabled&&e.selectedRowKeys.push(t.id)&&e.selectedRows.push(t)}))},handleSave:function(){var e=this,t=this.showUser?"user_perm":"role_perm",r=this.showUser?this.$refs.users.$refs.userTable.selectedRowKeys:[],a=this.$refs.roles.$refs.roleTable.selectedRowKeys;return this.showUser&&0===r.length?(this.$notification.warn({message:"提示",description:"请至少勾选一条用户记录",duration:4}),!1):this.showUser||0!==a.length?void Object(c["g"])({type:t,userIds:r,roleIds:a,permIds:this.$refs.permTable.selectedRowKeys}).then((function(t){e.$notification.success({message:"成功",description:t.message,duration:4}),e.$refs.permTable.refresh()})):(this.$notification.warn({message:"提示",description:"请至少勾选一条角色记录",duration:4}),!1)}}},i=l,d=r("2877"),m=Object(d["a"])(i,a,s,!1,null,null,null);t["default"]=m.exports},"8cbc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("s-table",{ref:"roleTable",attrs:{columns:e.roleColumns,"load-data":e.loadRoleData,multiSelect:!0,"page-size":-1,showRowNum:!1,dataSource:e.dataSource,"query-param":e.roleQueryParam,afterSearch:e.afterSearch},on:{"update:dataSource":function(t){e.dataSource=t},"update:data-source":function(t){e.dataSource=t}},scopedSlots:e._u([{key:"role_name",fn:function(t,a){return r("span",{},[e.showOp?r("a-tooltip",{attrs:{placement:"right",title:"点击查看角色权限"}},[r("a",{style:{color:a.isClick?"#ff1818":"#1890ff"},on:{click:function(t){return e.doSearchRolePerm(a)}}},[e._v(e._s(a.role_name))])]):r("span",{domProps:{textContent:e._s(a.role_name)}})],1)}}])})},s=[],o=(r("4160"),r("159b"),r("2af9")),n=r("0feb"),u={name:"Roles",components:{STable:o["g"]},props:{show:{type:Boolean,default:!0},showOp:{type:Boolean,default:!0},selectedRowKeys:{type:Array,default:function(){return[]}},selectedRows:{type:Array,default:function(){return[]}},roleQueryParam:{type:Object,default:function(){return{}}}},data:function(){return{dataSource:[],roleColumns:[{title:"角色",dataIndex:"role_name",searchable:!0,scopedSlots:{customRender:"role_name"}}]}},methods:{loadRoleData:function(e){return Object(n["d"])(e).then((function(e){return e.result}))},afterSearch:function(e,t){e.selectedRowKeys=[],e.selectedRows=[],t.forEach((function(t){t.enabled&&e.selectedRowKeys.push(t.id)&&e.selectedRows.push(t)}))},doSearchRolePerm:function(e){this.dataSource.forEach((function(e){return e.isClick&&delete e.isClick})),this.$set(e,"isClick",!0),this.$emit("doSearchRolePerm",e.id)}}},c=u,l=r("2877"),i=Object(l["a"])(c,a,s,!1,null,null,null);t["default"]=i.exports},"9c8b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("s-table",{ref:"userTable",attrs:{columns:e.userColumns,"load-data":e.loadUserData,multiSelect:!0,showRowNum:!1,"query-param":e.userQueryParam,dataSource:e.dataSource,pagination:{size:"small",simple:!0}},on:{"update:dataSource":function(t){e.dataSource=t},"update:data-source":function(t){e.dataSource=t}},scopedSlots:e._u([{key:"user_name",fn:function(t,a){return r("span",{},[r("a-tooltip",{attrs:{placement:"right",title:"点击查看用户权限"}},[r("a",{style:{color:a.isClick?"#ff1818":"#1890ff"},on:{click:function(t){return e.doSearchUserPerm(a)}}},[e._v(e._s(a.user_name))])])],1)}}])})},s=[],o=(r("4160"),r("159b"),r("2af9")),n=r("0feb"),u={name:"Users",components:{STable:o["g"]},data:function(){return{dataSource:[],userQueryParam:{},userColumns:[{title:"用户名",dataIndex:"user_name",searchable:!0,scopedSlots:{customRender:"user_name"}}]}},methods:{loadUserData:function(e){return Object(n["e"])(e).then((function(e){return e.result}))},doSearchUserPerm:function(e){this.dataSource.forEach((function(e){return e.isClick&&delete e.isClick})),this.$set(e,"isClick",!0),this.$emit("doSearchUserPerm",e.id)}}},c=u,l=r("2877"),i=Object(l["a"])(c,a,s,!1,null,"6dad4ab2",null);t["default"]=i.exports}}]);