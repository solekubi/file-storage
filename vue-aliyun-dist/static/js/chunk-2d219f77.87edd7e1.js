(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d219f77"],{ba02:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("s-table",{ref:"table",attrs:{columns:e.columns,"load-data":e.loadData,"data-source":e.dataSource,multiSelect:!1,draggable:!0,"page-size":-1},on:{"update:dataSource":function(t){e.dataSource=t},"update:data-source":function(t){e.dataSource=t}},scopedSlots:e._u([e._l(["role_name","role_code","description"],(function(t){return{key:t,fn:function(n,r){return[a("span",{key:t},[r.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{size:"small",value:r[t]},on:{"update:value":function(a){return e.$set(r,t,a)},change:function(a){return e.handleChange(a.target.value,r.id,t)}}}):[e._v(e._s(n)+" ")]],2)]}}})),{key:"status",fn:function(t,n){return a("span",{},[a("sample-switch",{attrs:{value:n.status,disabled:!n.editable},on:{"update:value":function(t){return e.$set(n,"status",t)}}})],1)}},{key:"action",fn:function(t,n){return a("span",{},[n.editable?[a("a",{on:{click:function(t){return e.handleSave(n)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要取消编辑此行？"},on:{confirm:function(t){return e.handleCancel(n.id)}}},[a("a",[e._v("取消")])])]:[a("a",{on:{click:function(t){return e.handleEdit(n.id)}}},[e._v("修改")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？",placement:"right"},on:{confirm:function(t){return e.handleDel([n.id])}}},[a("a",[e._v("删除")])])]],2)}}],null,!0)}),a("a-button",{staticStyle:{width:"100%","margin-top":"16px","margin-bottom":"8px"},attrs:{type:"dashed",icon:"plus"},on:{click:e.addRec}},[e._v("新增角色")])],1)},r=[],i=(a("4de4"),a("c740"),a("caad"),a("a434"),a("2532"),a("2af9")),c=a("ca00"),o=a("b775"),d=a("365c");function s(e){return Object(o["b"])({url:d["b"].Role+"/getRoleList",data:e,method:"get"})}function u(e){return Object(o["b"])({url:d["b"].Role+"/saveRole",data:e,method:"post"})}function l(e){return Object(o["b"])({url:d["b"].Role+"/delRole",data:e,method:"post"})}var f=a("c1df"),h=a.n(f),p={name:"Role",components:{STable:i["g"]},data:function(){return{queryParam:{},dataSource:[],columns:[{title:"名称",dataIndex:"role_name",searchable:!0,scopedSlots:{customRender:"role_name"}},{title:"编码",searchable:!0,dataIndex:"role_code",scopedSlots:{customRender:"role_code"}},{title:"状态",dataIndex:"status",scopedSlots:{filterIcon:"filterIcon",customRender:"status"},filters:[{text:"启用",value:"1"},{text:"禁用",value:"0"}]},{title:"描述",dataIndex:"description",scopedSlots:{customRender:"description"}},{title:"创建时间",dataIndex:"create_date"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}]}},methods:{doSearch:function(){this.$refs.table.doSearch(this.queryParam)},addRec:function(){this.dataSource.push({id:"add_"+h.a.now(),name:"",status:"1",permission:"",create_date:Object(c["a"])(h()()),description:"",editable:!0})},handleCancel:function(e){e.includes("add_")?this.dataSource.splice(this.dataSource.findIndex((function(t){return t.id===e})),1):(delete this.dataSource.filter((function(t){return t.id===e}))[0].editable,this.$forceUpdate())},handleSave:function(e){var t=this,a=this;u(e).then((function(n){a.$message.success(n.message),t.dataSource.filter((function(t){return t.id===e.id}))[0].id=n.result.id,t.handleCancel(n.result.id)}))},handleEdit:function(e){this.dataSource.filter((function(t){return t.id===e}))[0].editable=!0,this.$forceUpdate()},handleDel:function(e){var t=this;l({ids:e}).then((function(e){t.$message.success(e.message),t.doSearch()}))},handleChange:function(e,t,a){this.dataSource.filter((function(e){return e.id===t}))[0][a]=e,this.$forceUpdate()},loadData:function(e){return this.queryParam=Object.assign(this.queryParam,e),s(Object.assign({},this.queryParam,{create_date:Object(c["a"])(this.queryParam.create_date)})).then((function(e){return e.result}))}}},m=p,b=a("2877"),S=Object(b["a"])(m,n,r,!1,null,null,null);t["default"]=S.exports}}]);